# タスク分割: {{FEATURE_NAME}}

## プロジェクト情報

- **機能名**: {{FEATURE_NAME}}
- **開始予定日**: {{START_DATE}}（曜日）
- **完了予定日**: {{END_DATE}}（曜日）
- **総営業日数**: X営業日（営業日ベース）
- **総工数見積**: X人日
- **休日**: 土曜日・日曜日を除外
- **注意**: このタスク分割は営業日ベースで作成されています（土日・祝日を除外）

## Phase 0.1: 要件定義（Requirements）

**期間**: {{START_DATE}}（曜日）Day 1
**工数**: 0.5人日
**ステータス**: 未着手

### Story 0.1.1: 要件定義書作成
- **担当**: @PM
- **工数**: 0.5人日
- **説明**: 機能の要件定義書を作成
- **成果物**:
  - `.kiro/specs/{{FEATURE_NAME}}/requirements.md`
  - Confluenceページ（要件定義）
- **受け入れ基準**:
  - [ ] 機能要件が定義されている
  - [ ] 非機能要件が定義されている
  - [ ] ユースケースが記載されている
  - [ ] PM承認済み

## Phase 0.2: 設計（Design）

**期間**: Day 1-2
**工数**: 0.5-1.0人日
**ステータス**: 未着手

### Story 0.2.1: 基本設計
- **担当**: @Architect
- **工数**: 0.5-1.0人日
- **説明**: アーキテクチャ設計、API設計、クラス設計を実施
- **成果物**:
  - `.kiro/specs/{{FEATURE_NAME}}/design.md`
  - Confluenceページ（設計書）
- **受け入れ基準**:
  - [ ] システム構成図が作成されている
  - [ ] レイヤー構成が定義されている
  - [ ] API仕様が詳細に記載されている
  - [ ] クラス設計が完了している
  - [ ] Architect承認済み

## Phase 0.3: テストタイプ選択（任意）

**期間**: Day 2
**工数**: 0.5人日
**ステータス**: 未着手

### Story 0.3.1: テストタイプ選択
- **担当**: @QAEngineer, @Architect
- **工数**: 0.5人日
- **説明**: プロジェクトに必要なテストタイプを選択
- **成果物**:
  - テスト戦略ドキュメント
  - 選択されたテストタイプのリスト
- **受け入れ基準**:
  - [ ] 必須テスト（単体テスト、Lint、ビルド）が確認されている
  - [ ] プロジェクトに必要な追加テスト（統合/E2E/性能/セキュリティ）が選択されている
  - [ ] テスト戦略がドキュメント化されている
- **参考**: [テスト計画フロー](../../../docs/user-guide/testing/test-planning-flow.md)

## Phase 0.4: テスト仕様書作成（任意）

**期間**: Day 2-3
**工数**: 0.5-1.0人日
**ステータス**: 未着手

### Story 0.4.1: 単体テスト仕様書作成
- **担当**: @Developer
- **工数**: 0.25人日
- **説明**: 単体テストの仕様書を作成
- **成果物**:
  - `docs/testing/specs/unit-test-spec.md`
- **受け入れ基準**:
  - [ ] テストケースが網羅的に定義されている
  - [ ] 境界値テストが含まれている
  - [ ] エッジケースが含まれている

### Story 0.4.2以降: 追加テスト仕様書作成（任意）
- **統合テスト**: `docs/testing/specs/integration-test-spec.md`
- **E2Eテスト**: `docs/testing/specs/e2e-test-spec.md`
- **性能テスト**: `docs/testing/specs/performance-test-spec.md`
- **セキュリティテスト**: `docs/testing/specs/security-test-spec.md`

**参考**: [テスト仕様書テンプレート](../../../docs/user-guide/templates/test-specs/)

## Phase 1: 環境構築（任意）

**期間**: Day 3
**工数**: 0.5-1.0人日
**ステータス**: 未着手

### Story 1.1: テスト環境セットアップ
- **担当**: @DevOpsEngineer
- **工数**: 0.5-1.0人日
- **説明**: テスト環境のセットアップと設定
- **成果物**:
  - CI/CD設定ファイル
  - テスト環境構成ドキュメント
- **受け入れ基準**:
  - [ ] CI/CDパイプラインが構築されている
  - [ ] テストフレームワークがセットアップされている
  - [ ] モックサーバー・データベースが準備されている
  - [ ] 環境変数が適切に設定されている

## Phase 2: TDD実装（Implementation）

**期間**: Day 3-X
**工数**: X人日
**ステータス**: 未着手

### Story 2.1: プロジェクトセットアップ
- **担当**: @Developer
- **工数**: 0.5人日
- **説明**: プロジェクトのセットアップと依存関係の追加
- **タスク**:
  1. プロジェクト作成
  2. 依存関係追加
  3. アプリケーション設定ファイル作成
  4. パッケージ構造作成
  5. ビルド確認
- **成果物**:
  - プロジェクト設定ファイル
  - パッケージ構造
- **受け入れ基準**:
  - [ ] プロジェクトがビルド成功する
  - [ ] アプリケーションが起動する
  - [ ] パッケージ構造が設計通りに作成されている

### Story 2.2以降: コア機能実装
（プロジェクトに応じて具体的な実装タスクを記載）

**重要**:
- 単体テストはこのフェーズで実装
- TDD（テスト駆動開発）で進めること：RED → GREEN → REFACTOR
- 各Storyに受け入れ基準、サブタスク、依存関係を記載

## Phase A: PR前自動テスト（任意）

**期間**: Phase 2実装中に並行実行
**工数**: CI/CD自動実行
**ステータス**: 未着手

### Story A.1: 単体テスト実行
- **担当**: CI/CD（自動）
- **工数**: 自動実行
- **説明**: PR作成時に単体テストを自動実行
- **受け入れ基準**:
  - [ ] すべての単体テストが成功する
  - [ ] カバレッジ95%以上を達成
  - [ ] 新規コードがテストされている

### Story A.2: Lint実行
- **担当**: CI/CD（自動）
- **工数**: 自動実行
- **説明**: コード品質チェックを自動実行
- **受け入れ基準**:
  - [ ] Lintエラーがゼロ
  - [ ] コーディング規約に準拠

### Story A.3: ビルド実行
- **担当**: CI/CD（自動）
- **工数**: 自動実行
- **説明**: ビルドが成功することを確認
- **受け入れ基準**:
  - [ ] ビルドエラーがゼロ
  - [ ] 型チェックが成功

## Phase 3: 追加QA（Testing）

**期間**: Day X-Y
**工数**: X人日
**ステータス**: 未着手

### Story 3.1: 統合テスト
- **担当**: @QAEngineer
- **工数**: X人日
- **説明**: モジュール間の連携テスト
- **受け入れ基準**:
  - [ ] テストシナリオ作成
  - [ ] 統合テスト実施
  - [ ] バグ修正完了
- **タスク**:
  - [ ] Task 3.1.1: テストシナリオ作成
  - [ ] Task 3.1.2: 統合テスト実施
  - [ ] Task 3.1.3: バグ修正
- **依存関係**: Story 2.x完了後（実装完了後）

### Story 3.2: E2Eテスト
- **担当**: @QAEngineer
- **工数**: X人日
- **説明**: ユーザーシナリオに基づくE2Eテスト
- **受け入れ基準**:
  - [ ] ユーザーシナリオ作成
  - [ ] E2Eテスト実施
  - [ ] すべてのシナリオ成功
- **タスク**:
  - [ ] Task 3.2.1: シナリオ作成
  - [ ] Task 3.2.2: E2Eテスト実施
  - [ ] Task 3.2.3: バグ修正
- **依存関係**: Story 3.1完了後

## Phase B: リリース準備テスト（任意）

**期間**: Day Y-Z
**工数**: X人日
**ステータス**: 未着手

### Story B.1: 性能テスト実行
- **担当**: @QAEngineer
- **工数**: X人日
- **説明**: 負荷テストとレスポンスタイム測定
- **受け入れ基準**:
  - [ ] 負荷テスト実施
  - [ ] レスポンスタイム基準達成
  - [ ] ボトルネック特定・改善
- **タスク**:
  - [ ] Task B.1.1: 負荷テスト実施
  - [ ] Task B.1.2: パフォーマンス改善
- **依存関係**: Story 3.2完了後

### Story B.2: セキュリティテスト実行
- **担当**: @SecurityEngineer
- **工数**: X人日
- **説明**: 脆弱性スキャンとセキュリティチェック
- **受け入れ基準**:
  - [ ] 脆弱性スキャン実施
  - [ ] セキュリティチェックリスト完了
  - [ ] 重大な脆弱性ゼロ
- **タスク**:
  - [ ] Task B.2.1: 脆弱性スキャン
  - [ ] Task B.2.2: セキュリティ修正
- **依存関係**: Story B.1完了後

### Story B.3: 手動回帰テスト
- **担当**: @QAEngineer
- **工数**: X人日
- **説明**: リリース前の最終手動テスト
- **受け入れ基準**:
  - [ ] 回帰テストチェックリスト完了
  - [ ] すべてのクリティカルパス確認
  - [ ] 既知のバグが文書化されている
- **依存関係**: Story B.2完了後

## Phase 4: リリース準備（Release Preparation）

**期間**: Day Y-Z
**工数**: X人日
**ステータス**: 未着手

### Story 4.1: 本番環境構築
- **担当**: @InfraEngineer
- **工数**: X人日
- **説明**: 本番環境のインフラ構築と設定
- **受け入れ基準**:
  - [ ] サーバー構築
  - [ ] データベース設定
  - [ ] SSL証明書設定
  - [ ] 監視設定
- **タスク**:
  - [ ] Task 4.1.1: サーバー構築
  - [ ] Task 4.1.2: データベース設定
  - [ ] Task 4.1.3: SSL証明書設定
  - [ ] Task 4.1.4: 監視設定
- **依存関係**: Story 3.x完了後（QA完了後）

### Story 4.2: リリースドキュメント作成
- **担当**: @PM
- **工数**: X人日
- **説明**: リリースノート、マニュアル、運用手順書の作成
- **受け入れ基準**:
  - [ ] リリースノート作成
  - [ ] ユーザーマニュアル作成
  - [ ] 運用手順書作成
- **タスク**:
  - [ ] Task 4.2.1: リリースノート作成
  - [ ] Task 4.2.2: マニュアル作成
  - [ ] Task 4.2.3: 運用手順書作成
- **依存関係**: Story 4.1完了後

## Phase 5: リリース（Release）

**期間**: Day Z
**工数**: X人日
**ステータス**: 未着手

### Story 5.1: ステージング環境デプロイ
- **担当**: @InfraEngineer
- **工数**: X人日
- **説明**: ステージング環境へのデプロイと最終確認
- **受け入れ基準**:
  - [ ] ステージング環境デプロイ成功
  - [ ] スモークテスト成功
  - [ ] 最終確認完了
- **タスク**:
  - [ ] Task 5.1.1: デプロイ実施
  - [ ] Task 5.1.2: スモークテスト
  - [ ] Task 5.1.3: 最終確認
- **依存関係**: Story 4.2完了後

### Story 5.2: 本番環境リリース
- **担当**: @InfraEngineer, @PM
- **工数**: X人日
- **説明**: 本番環境へのリリース実施
- **受け入れ基準**:
  - [ ] 本番環境デプロイ成功
  - [ ] スモークテスト成功
  - [ ] 監視確認
  - [ ] ステークホルダーへの通知
- **タスク**:
  - [ ] Task 5.2.1: 本番デプロイ
  - [ ] Task 5.2.2: スモークテスト
  - [ ] Task 5.2.3: 監視確認
  - [ ] Task 5.2.4: 通知送信
- **依存関係**: Story 5.1完了後

### Story 5.3: リリース承認・完了報告
- **担当**: @PM
- **工数**: X人日
- **説明**: リリース承認の取得と完了報告
- **受け入れ基準**:
  - [ ] 承認取得
  - [ ] Confluenceにリリース完了報告
  - [ ] spec.jsonのmilestones更新
- **タスク**:
  - [ ] Task 5.3.1: 承認取得
  - [ ] Task 5.3.2: 完了報告作成
  - [ ] Task 5.3.3: Confluenceに完了報告
- **依存関係**: Story 5.2完了後

## タイムライン（営業日ベース）

**前提**: 土日・祝日を除いた営業日で計算（1日8時間の実開発時間）

### Week 1: 仕様化フェーズ

```text
Day 1（月）:
  - Story 0.1.1: 要件定義書作成
  - Story 0.2.1: 基本設計開始

Day 2-3（火水）:
  - Story 0.2.1: 基本設計完了
  - Story 0.3.1: テストタイプ選択（任意）
  - Story 0.4.x: テスト仕様書作成（任意）
  - 技術レビュー・PM承認
```

### Week 2: 環境構築・実装開始

```text
Day 4-5（木金）:
  - Story 1.1: テスト環境セットアップ（任意）
  - Story 2.1: プロジェクトセットアップ
  - Story 2.2以降: TDD実装開始
```

### Week 3-N: TDD実装・自動テスト

```text
（プロジェクトの規模に応じて調整）
- Phase 2: TDD実装継続
- Phase A: PR前自動テスト（CI/CD並行実行）
```

### Week N+1: QA・リリース

```text
- Phase 3: 追加QA（統合テスト、E2E）
- Phase B: リリース準備テスト（性能、セキュリティ）
- Phase 4: リリース準備
- Phase 5: リリース
```

## 見積もりサマリー

| フェーズ | ストーリーポイント | 工数（人日） | ストーリー数 |
|---------|----------------|------------|------------|
| Phase 0.1: 要件定義 | X SP | X 日 | X |
| Phase 0.2: 設計 | X SP | X 日 | X |
| Phase 0.3-0.4: テスト計画（任意） | X SP | X 日 | X |
| Phase 1: 環境構築（任意） | X SP | X 日 | X |
| Phase 2: TDD実装 | X SP | X 日 | X |
| Phase A: PR前自動テスト（任意） | - | - | - |
| Phase 3: 追加QA（任意） | X SP | X 日 | X |
| Phase B: リリース準備テスト（任意） | X SP | X 日 | X |
| Phase 4: リリース準備 | X SP | X 日 | X |
| Phase 5: リリース | X SP | X 日 | X |
| **合計** | **X SP** | **X 日** | **X** |

**換算レート**: 1 SP ≈ 0.5人日

**注意**:
- Phase A（PR前自動テスト）はCI/CD自動実行のため工数不要
- 任意フェーズはプロジェクト要件に応じて含めるか判断

## JIRAラベル一覧

各ストーリーには以下のラベルが自動付与されます：

**新ワークフロー構造のラベル:**
- `spec-init` - Phase 0.0: プロジェクト初期化
- `requirements` - Phase 0.1: 要件定義
- `design` - Phase 0.2: 設計
- `test-type-selection` - Phase 0.3: テストタイプ選択
- `test-spec` - Phase 0.4: テスト仕様書作成
- `tasks` / `spec-tasks` - Phase 0.5: タスク分割
- `jira-sync` - Phase 0.6: JIRA同期
- `environment-setup` - Phase 1: 環境構築
- `implementation` / `tdd-implementation` - Phase 2: TDD実装
- `phase-a` / `pr-tests` - Phase A: PR前自動テスト
- `additional-qa` / `testing` - Phase 3: 追加QA
- `phase-b` / `release-tests` - Phase B: リリース準備テスト
- `release-prep` / `release-preparation` - Phase 4: リリース準備
- `release` - Phase 5: リリース

**JIRAフィルター例**:
```text
project = PROJ AND labels = "requirements"       # 要件定義タスクのみ
project = PROJ AND labels = "implementation"     # TDD実装タスクのみ
project = PROJ AND labels = "phase-a"            # PR前自動テストタスクのみ
project = PROJ AND labels = "testing"            # 追加QAタスクのみ
project = PROJ AND labels = "release"            # リリースタスクのみ
```

---

**次のステップ**:
1. tasks.mdを上記テンプレートに従って作成
2. `npx @sk8metal/michi-cli phase:run <feature> tasks` 実行
3. JIRAに全フェーズのストーリーが自動作成される

**参考ドキュメント**:
- [ワークフローガイド](../../../docs/user-guide/guides/workflow.md)
- [フェーズ自動化ガイド](../../../docs/user-guide/guides/phase-automation.md)
- [テスト計画フロー](../../../docs/user-guide/testing/test-planning-flow.md)
- [テスト仕様書テンプレート](../../../docs/user-guide/templates/test-specs/)
